<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.deepoove.cargo.infrastructure.db.mapper.CargoMapper">

	<resultMap id="cargoDO"
		type="com.deepoove.cargo.infrastructure.db.dataobject.CargoDO">
		<result property="senderPhone" column="sender_phone" />
		<result property="originLocationCode"
			column="originLocation_code" />
		<result property="destinationLocationCode"
			column="destinationLocation_code" />
	</resultMap>

	<select id="select" resultMap="cargoDO">
		SELECT * FROM ddd_cargo WHERE id =
		#{id}
	</select>
	<select id="selectAll" resultMap="cargoDO">
		SELECT * FROM ddd_cargo
	</select>
	<select id="selectByCustomer" resultMap="cargoDO">
		SELECT * FROM
		ddd_cargo
		WHERE sender_phone = #{phone}
	</select>
	<select id="countByCustomer" resultType="integer">
		SELECT count(*) FROM ddd_cargo WHERE sender_phone = #{phone}
	</select>
	<insert id="save">
		INSERT INTO ddd_cargo (`id`,
		`sender_phone`,
		`description`,
		`originLocation_code`,
		`destinationLocation_code`,
		`created_at`)
		VALUES (#{id}, #{senderPhone},
		#{description},
		#{originLocationCode},
		#{destinationLocationCode},
		now())
	</insert>
	<insert id="update">
		UPDATE ddd_cargo
		set sender_phone = #{senderPhone},
		description = #{description},
		originLocation_code = #{originLocationCode},
		destinationLocation_code = #{destinationLocationCode}
		WHERE id = #{id}
	</insert>
	<delete id="remove">
		DELETE FROM ddd_cargo WHERE id =
		#{id}
	</delete>
</mapper>